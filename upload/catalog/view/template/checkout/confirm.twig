<div class="order-summary">
  <div class="mb-3">
    {% for product in products %}
      <div class="d-flex justify-content-between align-items-start py-3 {% if not loop.last %}border-bottom{% endif %}">
        <div class="flex-grow-1">
          <div class="d-flex align-items-center mb-2">
            <span class="badge bg-primary me-2">{{ product.quantity }}x</span>
            <a href="{{ product.href }}" class="text-decoration-none fw-semibold text-dark">{{ product.name }}</a>
          </div>
          <ul class="list-unstyled small text-muted mb-0 ms-4">
            <li><strong>Model:</strong> {{ product.model }}</li>
            {% for option in product.option %}
              <li><strong>{{ option.name }}:</strong> {{ option.value }}</li>
            {% endfor %}
            {% if product.subscription %}
              <li><strong>{{ text_subscription }}:</strong> {{ product.subscription }}</li>
            {% endif %}
            {% if product.reward %}
              <li class="text-success"><i class="fa-solid fa-gift"></i> <strong>{{ text_points }}:</strong> {{ product.reward }}</li>
            {% endif %}
          </ul>
        </div>
        <div class="text-end ms-3">
          <strong class="text-dark"><x-currency code="{{ currency }}" amount="{{ product.total }}"></x-currency></strong>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="border-top pt-3">
    {% for total in totals %}
      <div class="d-flex justify-content-between mb-2 {% if total.title == 'Total' %}pt-3 mt-3 border-top{% endif %}">
        <span class="{% if total.title == 'Total' %}fw-bold fs-5{% endif %}">{{ total.title }}</span>
        <span class="{% if total.title == 'Total' %}fw-bold fs-5 text-primary{% else %}text-muted{% endif %}">
          <x-currency code="{{ currency }}" amount="{{ total.value }}"></x-currency>
        </span>
      </div>
    {% endfor %}
  </div>
</div>

<div id="checkout-payment" class="mt-4">
  {% if payment %}
    {{ payment }}
  {% else %}
    <div class="d-grid gap-2">
      <button type="button" class="btn btn-primary btn-lg" disabled>
        <i class="fa-solid fa-lock me-2"></i>{{ button_confirm }}
      </button>
    </div>
  {% endif %}
</div>
